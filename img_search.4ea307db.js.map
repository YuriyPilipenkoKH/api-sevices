{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,yCCAAC,EAAAD,EAAA,SAKQE,eAAeC,EAAUC,EAAMC,EAAKC,GACxC,IACI,MAAMC,EAAS,IAAIC,gBAAgB,CAC/BC,IANI,qCAOJC,EAAGN,EACHO,WAAY,QACZC,YAAa,aACbC,YAAY,EACZR,KAAMA,EACNS,SAAUR,IAGVS,QAAiBd,EAAAe,QAAMC,IAAI,4BAAgBV,KAGjD,OAFAW,QAAQC,IAAIJ,EAASK,MAEdL,EAASK,I,CAChB,MAAOC,GAEL,MADAH,QAAQG,MAAMA,GACRC,MAAMP,SAASQ,W,aDdZ,IAAIC,eAAe,qBAAsB,CACtDC,aAAc,MACdC,aAAc,MAIlBC,SAASC,cAAc,SAASC,UAAYC,EAAAC,oBAErC,MAAMC,EAAO,CAChBC,KAAMN,SAASC,cAAc,WAC7BM,KAAMP,SAASC,cAAc,gBAC7BO,MAAOR,SAASC,cAAc,UAC9BQ,IAAKT,SAASC,cAAc,eAC5BS,SAAUV,SAASC,cAAc,cACjCU,IAAMX,SAASC,cAAc,YAC7BW,MAAQZ,SAASC,cAAc,iBAGnCI,EAAKE,KAAKM,iBAAiB,UAQ3B,SAAkBC,GAQd,GAPAA,EAAEC,iBACFC,EAAQX,EAAKG,MAAMS,MAAMC,OACzBb,EAAKI,IAAIU,UAAW,EACpBd,EAAKM,IAAIT,UAAY,GACrBG,EAAKK,SAASU,UAAUC,IAAI,aAGd,KAAVL,EAEA,YADAM,EAAAlD,GAASmD,OAAOC,QAAQ,wEAG5B,GAAsB,IAAjBR,EAAMS,OAEP,YADAH,EAAAlD,GAASmD,OAAOC,QAAQ,8DAI5BjC,QAAQC,IAAIa,EAAKG,MAAMS,OACvBzC,EAAUwC,EArBD,EACG,IAqBXU,MAAOjC,IACJ,MAAMkC,KAACA,EAAIC,UAAEA,EAASC,MAAEA,GAAUpC,EAClCF,QAAQC,IAAI,OAAQmC,EAAM,YAAaC,EAAW,QAAQC,GAExC,IAAdD,GACAN,EAAAlD,GAASmD,OAAOC,QACZ,2EACD,G,IAjCfnB,EAAKK,SAASG,iBAAiB,SAqC/B,SAAoBC,GAChBA,EAAEC,gB,IArCNV,EAAKG,MAAMK,iBAAiB,SAwC5B,WACIR,EAAKI,IAAIU,UAAW,C,IAvCxB,IAAIH,EAAQX,EAAKG,MAAMS","sources":["src/js/img_search/img_search.js","src/js/img_search/img_fetch.js"],"sourcesContent":["import { Notify } from \"notiflix\";\nimport Notiflix from 'notiflix';\nimport simpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\nimport { headerOfClassSearch } from '../mainMarkup'\nimport { fetchCard } from \"./img_fetch\";\nimport '../../css/img_search.css'\nimport '../toIndex'\n\nconst lightbox = new SimpleLightbox('.gallery .user_img', {\n    captionsData: 'alt',\n    captionDelay: 250,\n   \n  });\n\ndocument.querySelector('#root').innerHTML = headerOfClassSearch\n\nexport const refs = {\n    head: document.querySelector('.header'),\n    form: document.querySelector('#search-form'),\n    input: document.querySelector('.field'),\n    sub: document.querySelector('.search-btn'),\n    loadMore: document.querySelector('.load-more'),\n    gal : document.querySelector('.gallery'),\n    toTop : document.querySelector('.back-to-top'),\n}\n\nrefs.form.addEventListener('submit', onSearch)\nrefs.loadMore.addEventListener('click', onLoadMore)\nrefs.input.addEventListener('input', onInputChange)\n\nlet query = refs.input.value\nconst page = 1 \nconst perPage = 40\n\nfunction onSearch(e) {\n    e.preventDefault()\n    query = refs.input.value.trim()\n    refs.sub.disabled = true\n    refs.gal.innerHTML = '';\n    refs.loadMore.classList.add('is-hidden');\n\n\n    if (query === '') {\n        Notiflix.Notify.failure('The search string cannot be empty. Please specify your search query.');\n        return;\n      }\n    if ( query.length === 1) {\n        Notiflix.Notify.failure('The  query is too short. Please specify your search query.');\n        return;\n    }\n\n    console.log(refs.input.value);\n    fetchCard(query,page,perPage)\n    .then(( data) => {\n        const {hits, totalHits, total } = data\n        console.log('hits', hits, 'totalHits', totalHits, 'total',total) ;\n\n        if (totalHits === 0) {\n            Notiflix.Notify.failure(\n                'Sorry, there are no images matching your search query. Please try again.',\n              )}\n    })\n}\n\nfunction onLoadMore(e) {\n    e.preventDefault()\n}\n\nfunction onInputChange() {\n    refs.sub.disabled = false\n}\n\n","import axios from \"axios\";\n\nconst API_KEY = '34491623-5c4ef369d6c59f62bc483440c';\nconst BASE_URL = 'https://pixabay.com/api';\n\nexport  async function fetchCard(query,page,perPage) {\n    try {\n        const params = new URLSearchParams({\n            key: API_KEY,  \n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: perPage,\n        });\n\n      const response = await axios.get(`${BASE_URL}/?${params}`);\n      console.log(response.data);\n     \n      return response.data\n    } catch (error) {\n        console.error(error);\n        throw Error(response.statusText)\n      \n    }\n}\n\n"],"names":["$7Y9D8","parcelRequire","$2shzp","async","$12af8941ade6e550$export$e3a01ccdbd5c13a9","query","page","perPage","params","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","response","default","get","console","log","data","error","Error","statusText","SimpleLightbox","captionsData","captionDelay","document","querySelector","innerHTML","$31gzB","headerOfClassSearch","$02cd4a58b7150322$export$21666b427502ea6d","head","form","input","sub","loadMore","gal","toTop","addEventListener","e","preventDefault","$02cd4a58b7150322$var$query","value","trim","disabled","classList","add","$parcel$interopDefault","Notify","failure","length","then","hits","totalHits","total"],"version":3,"file":"img_search.4ea307db.js.map"}